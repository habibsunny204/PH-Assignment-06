<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green Earth - Plant a Tree, Grow a Future</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/85ea785855.js" crossorigin="anonymous"></script>
</head>

<body>
    <header>
        <!-- nav bar -->
        <nav class="bg-[#15803D] text-white py-4 px-6 flex justify-between items-center">
            <div class="text-2xl font-bold">Green Earth</div>
            <div class="hidden md:flex space-x-6">
                <a href="#about" class="hover:text-green-300">About</a>
                <a href="#gallery" class="hover:text-green-300">Gallery</a>
                <a href="#plant" class="hover:text-green-300">Plant a Tree</a>
            </div>
            <button class="bg-yellow-500 hover:bg-green-600 px-4 py-2 rounded-full font-semibold">Plant a Tree</button>
            <div class="md:hidden">
                <i class="fas fa-bars text-xl"></i>
            </div>
        </nav>

        <!-- Banner -->
        <section class="bg-[#CFF0DC] flex items-center justify-center py-16 px-4 md:justify-between md:h-90 md:p-0">
            <div class="hidden md:block">
                <img src="assets/hero-leaf1.png" alt="leaf">
            </div>

            <div class="text-center max-w-2xl">
                <h1 class="text-3xl font-bold text-black mb-4 sm:text-4xl md:text-5xl">
                    Plant a Tree, Grow a Future
                </h1>
                <p class="text-base text-black mb-8 md:text-xl">
                    Join our mission to plant 1 trillion trees and make the Earth greener for future generations.
                </p>
                <button
                    class="bg-yellow-500 hover:bg-green-600 text-black px-8 py-3 rounded-full font-semibold text-lg transition-colors">
                    Get involved
                </button>
            </div>

            <div class="hidden md:block">
                <img src="assets/hero-leaf2.png" alt="leaf">
            </div>
        </section>
    </header>

    <main class="bg-sky-50">
        <!-- tree section -->
        <section class="grid grid-cols-12 gap-6 p-6 container mx-auto">

            <!-- Categories -->
            <aside class="col-span-12 md:col-span-2 bg-white rounded-xl shadow p-4">
                <h2 class="text-xl font-semibold mb-3">Categories</h2>
                <ul id="categories" class="space-y-3">
                    <li>
                        <button id="all-plants-btn"
                            class="w-full text-left px-3 py-2 rounded-lg bg-green-100 text-green-700 font-medium transition active-category"
                            onclick="loadPlants()">
                            All Trees
                        </button>
                    </li>
                </ul>
            </aside>

            <!-- Plants Grid -->
            <section class="col-span-12 md:col-span-8">
                <h2 class="text-xl font-semibold mb-3" id="plants-title">Plants Collection</h2>
                <div id="plants" class="grid grid-cols-1 md:grid-cols-3 gap-3"></div>
                <div id="loading" class="text-center py-8 hidden">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-700"></div>
                    <p class="mt-2 text-gray-600">Loading plants...</p>
                </div>
                <div id="error-message" class="hidden text-center py-8 text-red-500">
                    Error loading plants. Please try again later.
                </div>
            </section>

            <!-- Cart Sidebar -->
            <aside class="col-span-12 md:col-span-2 bg-white rounded-xl shadow p-4 sticky top-4 h-fit">
                <h2 class="text-xl font-semibold mb-3">ðŸ›’ Your Cart
                    <span id="cart-count" class="bg-green-600 text-white text-sm rounded-full px-2 py-1">0</span>
                </h2>
                <ul id="cart" class="space-y-3">
                    <li class="text-gray-500 text-center py-4">Your cart is empty</li>
                </ul>
                <div id="cart-total" class="mt-4 pt-4 border-t hidden">
                    <div class="flex justify-between font-bold">
                        <span>Total:</span>
                        <span>à§³<span id="total-amount">0</span></span>
                    </div>
                    <button class="mt-3 w-full bg-green-600 text-white rounded-lg py-2 hover:bg-green-700 transition">
                        Checkout
                    </button>
                </div>
            </aside>
        </section>

        <!-- Modal -->
        <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4">
            <div class="bg-white p-6 rounded-xl w-full max-w-md relative">
                <button onclick="closeModal()" class="absolute top-4 right-4 text-red-600 font-bold text-xl">âœ–</button>
                <div id="modal-content"></div>
            </div>
        </div>

        <!-- About Campaign -->
        <section id="about" class="py-16 sm:py-20">
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12">About the Campaign</h2>

                <div class="flex flex-col md:flex-row items-center gap-10 lg:gap-16">
                    <div class="w-full md:w-1/2">
                        <img src="assets/about.png" alt="tree"
                            class="w-full aspect-square rounded-lg shadow-lg object-cover">
                    </div>
                    <div class="w-full md:w-1/2">
                        <p class="text-lg text-[#1F2937] mb-6">
                            Green Earth is a global tree generation initiative dedicated to fighting climate change. We
                            have planted over 50,000 trees worldwide. By joining our campaign, you help restore forests,
                            create habitats for wildlife, and combat global warming.
                        </p>
                        <ul class="space-y-2 list-disc pl-5 text-lg text-[#1F2937]">
                            <li><span>Association of coastal habitats</span></li>
                            <li><span>Improvement of air quality</span></li>
                            <li><span>Support for local communities</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- impact section -->
        <section class="py-12 px-4 bg-[#CFF0DC]">
            <div class="container mx-auto">
                <h2 class="text-3xl font-bold text-green-800 text-center mb-8">Our Impact</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-white p-6 rounded-lg text-center shadow-md">
                        <div class="text-5xl font-bold text-green-700 mb-2">500K+</div>
                        <div class="text-xl text-[#1F2937]">Trees Planted</div>
                    </div>
                    <div class="bg-white p-6 rounded-lg text-center shadow-md">
                        <div class="text-5xl font-bold text-green-700 mb-2">120+</div>
                        <div class="text-xl text-[#1F2937]">Communities Involved</div>
                    </div>
                    <div class="bg-white p-6 rounded-lg text-center shadow-md">
                        <div class="text-5xl font-bold text-green-700 mb-2">30+</div>
                        <div class="text-xl text-[#1F2937]">Countries Reached</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Form -->
        <section id="plant" class="py-12 px-4 bg-green-800 text-white">
            <div class="container mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8">Plant a Tree Today</h2>

                <form class="max-w-lg mx-auto bg-green-700 p-8 rounded-lg">
                    <div class="mb-4">
                        <input type="text" id="name" class="w-full p-3 rounded text-green-900" placeholder="Your Name">
                    </div>
                    <div class="mb-4">
                        <input type="email" id="email" class="w-full p-3 rounded text-green-900"
                            placeholder="Your Email Address">
                    </div>
                    <div class="mb-6">
                        <select id="trees" class="w-full p-3 rounded text-green-900">
                            <option disabled selected>Number of Trees</option>
                            <option value="1">1 Tree - $5</option>
                            <option value="5">5 Trees - $25</option>
                            <option value="10">10 Trees - $50</option>
                        </select>
                    </div>
                    <button type="submit"
                        class="bg-yellow-500 hover:bg-green-600 text-black w-full py-3 rounded-full font-semibold text-lg transition-colors">Donate
                        Now</button>
                </form>
            </div>
        </section>
    </main>

    <footer class="bg-green-900 text-white py-8 text-center">
        <p>Â© 2023 Green Earth. All Rights Reserved.</p>
    </footer>

    <script>
        const categoriesEl = document.getElementById("categories");
        const plantsEl = document.getElementById("plants");
        const plantsTitle = document.getElementById("plants-title");
        const loadingEl = document.getElementById("loading");
        const errorMessageEl = document.getElementById("error-message");
        const cartEl = document.getElementById("cart");
        const cartCountEl = document.getElementById("cart-count");
        const cartTotalEl = document.getElementById("cart-total");
        const totalAmountEl = document.getElementById("total-amount");
        const modalEl = document.getElementById("modal");
        const modalContentEl = document.getElementById("modal-content");
        const allPlantsBtn = document.getElementById("all-plants-btn");

        let plantsData = [];
        let cart = [];
        let categoriesData = [];

        // Loading states
        function showLoading() {
            loadingEl.classList.remove('hidden');
            plantsEl.innerHTML = '';
            errorMessageEl.classList.add('hidden');
        }

        function hideLoading() {
            loadingEl.classList.add('hidden');
        }

        function showError() {
            errorMessageEl.classList.remove('hidden');
            plantsEl.innerHTML = '';
        }

        // Display Plants
        function displayPlants(plants) {
            if (plants.length === 0) {
                plantsEl.innerHTML = '<p class="text-center text-gray-500 col-span-3 py-8">No plants found in this category</p>';
                return;
            }

            plantsEl.innerHTML = plants.map(plant => `
        <div class="bg-white rounded-xl shadow flex flex-col">
          <img src="${plant.image}" alt="${plant.name}" class="w-full h-48 object-cover rounded-t-lg">
          <div class="p-4">
             <h3 onclick="viewDetails(${plant.id})" 
             class="text-lg font-semibold cursor-pointer hover:text-green-600 transition">${plant.name}</h3>
             <p class="text-gray-500 line-clamp-2 mt-4 flex-grow">${plant.description || 'No description available'}</p>
             <div class="flex justify-between items-center mt-4">
                <span class="text-green-600 font-bold">${plant.category}</span>
                <span class="text-green-600 font-bold">à§³${plant.price}</span>
              </div>
              <div>
                 <button onclick="addToCart(${plant.id})" class="bg-sky-500 w-full text-white px-6 py-2 rounded-full mt-4 hover:bg-green-700 transition">Add to Cart</button>
              </div>
          </div>
        </div>
      `).join('');
        }

        // Load all plants
        async function loadPlants() {
            showLoading();
            setActiveCategory(allPlantsBtn);
            try {
                const res = await fetch("https://openapi.programming-hero.com/api/plants");
                if (!res.ok) throw new Error("Failed to fetch plants");

                const data = await res.json();
                plantsData = data.plants || [];
                plantsTitle.textContent = "All Plants";
                displayPlants(plantsData);
            } catch (error) {
                console.error("Error loading plants:", error);
                showError();
            } finally {
                hideLoading();
            }
        }

        // Load categories list
        async function loadCategories() {
            try {
                const res = await fetch("https://openapi.programming-hero.com/api/categories");
                if (!res.ok) throw new Error("Failed to fetch categories");

                const data = await res.json();
                categoriesData = data.categories || [];

                categoriesData.forEach(cat => {
                    const li = document.createElement("li");
                    li.innerHTML = `
            <button class="category-btn w-full text-left px-3 py-2 rounded-lg bg-green-50 hover:bg-green-200 hover:text-green-700 transition"
              onclick="loadCategory(${cat.id}, '${cat.category_name}')">
              ${cat.category_name}
            </button>`;
                    categoriesEl.appendChild(li);
                });
            } catch (err) {
                console.error("Error loading categories", err);
            }
        }

        // Set active category button
        function setActiveCategory(activeBtn) {
            // Remove active class from all buttons
            document.querySelectorAll('#categories button').forEach(btn => {
                btn.classList.remove('active-category');
                btn.classList.add('bg-green-50');
                btn.classList.remove('bg-green-100');
            });

            // Add active class to clicked button
            activeBtn.classList.add('active-category');
            activeBtn.classList.remove('bg-green-50');
            activeBtn.classList.remove('hover:bg-green-200');
            activeBtn.classList.remove('hover:text-green-700');
        }

        // Load plants by category
        async function loadCategory(id, name) {
            showLoading();
            setActiveCategory(event.target);
            try {
                const res = await fetch(`https://openapi.programming-hero.com/api/category/${id}`);
                if (!res.ok) throw new Error("Failed to fetch category plants");

                const data = await res.json();
                plantsData = data.plants || [];
                plantsTitle.textContent = name;
                displayPlants(plantsData);
            } catch (err) {
                console.error("Error loading category plants", err);
                showError();
            } finally {
                hideLoading();
            }
        }

        // View plant details
        async function viewDetails(id) {
            try {
                const res = await fetch(`https://openapi.programming-hero.com/api/plant/${id}`);
                if (!res.ok) throw new Error("Failed to fetch plant details");

                const data = await res.json();
                const plant = data.plants;

                modalContentEl.innerHTML = `
          <img src="${plant.image}" alt="${plant.name}" class="w-full h-64 object-cover rounded-lg">
          <h3 class="text-xl font-semibold mt-4">${plant.name}</h3>
          <p class="text-gray-600 mt-2">${plant.description || 'No description available'}</p>
          <div class="flex justify-between items-center mt-3">
            <span class="text-green-600 font-bold">${plant.category}</span>
            <span class="text-green-600 font-bold">à§³${plant.price}</span>
          </div>
          <div>
              <button onclick="addToCart(${plant.id})" class="bg-green-600 w-full text-white px-6 py-2 rounded-full hover:bg-green-700 transition">Add to Cart</button>
          </div>`;
                modalEl.classList.remove("hidden");
            } catch (err) {
                console.error("Error loading details", err);
                modalContentEl.innerHTML = `<p class="text-red-500">Error loading plant details</p>`;
                modalEl.classList.remove("hidden");
            }
        }

        // Close modal
        function closeModal() {
            modalEl.classList.add("hidden");
        }

        // Cart functions
        function addToCart(id) {
            const plant = plantsData.find(p => p.id === id);
            if (!plant) return;

            const existing = cart.find(item => item.id === id);
            if (existing) {
                existing.quantity++;
            } else {
                cart.push({
                    id: plant.id,
                    name: plant.name,
                    price: plant.price,
                    image: plant.image,
                    quantity: 1
                });
            }
            updateCart();

            const feedback = document.createElement('div');
            feedback.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg';
            feedback.innerHTML = `Added ${plant.name} to cart!`;
            document.body.appendChild(feedback);

            setTimeout(() => {
                document.body.removeChild(feedback);
            }, 2000);
        }

        function removeFromCart(id) {
            const index = cart.findIndex(item => item.id === id);
            if (index > -1) {
                if (cart[index].quantity > 1) {
                    cart[index].quantity--;
                } else {
                    cart.splice(index, 1);
                }
            }
            updateCart();
        }

        function updateCart() {
            if (cart.length === 0) {
                cartEl.innerHTML = '<li class="text-gray-500 text-center py-4">Your cart is empty</li>';
                cartTotalEl.classList.add("hidden");
                cartCountEl.textContent = "0";
                return;
            }

            cartEl.innerHTML = cart.map(item => `
        <li class="cart-item flex items-center justify-between p-2 bg-green-50 rounded-lg">
          <div class="flex items-center">
            <img src="${item.image}" alt="${item.name}" class="w-10 h-10 object-cover rounded">
            <div class="ml-2">
              <h4 class="text-sm font-medium">${item.name}</h4>
              <p class="text-green-600 text-xs">à§³${item.price} x ${item.quantity}</p>
            </div>
          </div>
          <button onclick="removeFromCart(${item.id})" class="text-red-500"><i class="fas fa-trash"></i></button>
        </li>`).join('');

            cartCountEl.textContent = cart.reduce((sum, i) => sum + i.quantity, 0);
            totalAmountEl.textContent = cart.reduce((sum, i) => sum + (i.price * i.quantity), 0);
            cartTotalEl.classList.remove("hidden");
        }

        // Initialize
        document.addEventListener("DOMContentLoaded", () => {
            loadPlants();
            loadCategories();
        });
    </script>
</body>

</html>